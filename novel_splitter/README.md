# 小说拆分工具

AI短剧素材生成系统的第一个模块，用于将小说按部和章节拆分，为后续的剧本改写功能做准备。

## 功能特性

1. **自动解析小说结构**：识别分部和章节
2. **智能编码检测**：自动识别UTF-8/GBK编码
3. **多种拆分模式**：按部、按章、同时按部按章
4. **文件名自动清理**：移除特殊字符，规范化命名
5. **元数据生成**：生成JSON格式的小说信息

## 使用方法

### 基础用法

```bash
# 默认模式：同时按部和按章拆分
python cli.py --input "ebook/《奥术神座》- 爱潜水的乌贼.txt"

# 只按部拆分
python cli.py --input "ebook/《奥术神座》- 爱潜水的乌贼.txt" --mode part

# 只按章拆分
python cli.py --input "ebook/《奥术神座》- 爱潜水的乌贼.txt" --mode chapter

# 自定义输出目录
python cli.py --input "ebook/《奥术神座》- 爱潜水的乌贼.txt" --output custom_dir/
```

### 输出结构

```
novels/《奥术神座》- 爱潜水的乌贼/
├── metadata.json                     # 小说元数据
├── parts/                             # 按部拆分的文件
│   ├── 第一部-圣咏之城.txt
│   ├── 第二部-死亡盛宴.txt
│   ├── 第三部-天空之城.txt
│   ├── 第四部-黑暗山脉.txt
│   └── ...
└── chapters/                           # 按章拆分的文件
    ├── 第一部/
    │   ├── 第1章-燃烧的火刑架.txt
    │   ├── 第2章-随自己而来的.txt
    │   └── ...
    ├── 第二部/
    │   ├── 第1章-龙牙酒馆.txt
    │   ├── 第2章-同行的陌生人们.txt
    │   └── ...
    └── ...
```

## 文件命名规范

- **分部文件**：第X部-分部标题.txt
- **章节文件**：第X部-第Y章-章节标题.txt

## 技术特性

- 支持9.6MB大文件处理
- 自动编码检测（UTF-8/GBK/GB2312）
- 正则表达式匹配分部和章节
- 文件名特殊字符清理
- 进度实时显示

## 依赖要求

- Python 3.6+
- 标准库：re, os, json, datetime, pathlib

## 开发状态

✅ 小说解析器
✅ 小说拆分器
✅ 文件名清理工具
✅ 元数据管理器
✅ CLI接口

## 下一步

- 测试小说拆分工具
- 开发剧本改写模块（使用拆分后的章节内容）

## 注意事项

1. 文件命名会自动清理特殊字符
2. 章节边界基于正则表达式匹配
3. 输出目录会自动创建
4. 元数据JSON包含完整的小说结构信息